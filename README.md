# lab_streaming

### Создайте виртуальное окружение (Python >= 3.8.1)

```
python -m venv venv
```

### Активируйте виртуальное окружение

```
source venv/bin/activate
```

### Загрузите нужные библиотеки

```
pip install -r requirements.txt
```

## Предметная область

Чтение уведомлений почти в режиме реального времени о новых и обновленных событиях землетрясений с помощью протокола WebSocket. Любой клиент WebSocket может подключиться к сервису `wss://www.seismicportal.eu/standing_order/websocket`, чтобы получить уведомление. Пример кода на `Python` предоставлен в файле `test.py`.

`https://www.seismicportal.eu/webservices.html` - основные сервисы

Полученное сообщение имеет вид:

```
{
    "action":"create",
    "data":{
        "type":"Feature",
        "geometry":{
            "type":"Point",
            "coordinates":[
                -82.876,
                9.02,
                -20.0
            ]
        },
        "id":"20241004_0000179",
        "properties":{
            "source_id":"1714196",
            "source_catalog":"EMSC-RTS",
            "lastupdate":"2024-10-04T16:56:50.496103Z",
            "time":"2024-10-04T16:28:30.0Z",
            "flynn_region":"PANAMA-COSTA RICA BORDER REGION",
            "lat":9.02,
            "lon":-82.876,
            "depth":20.0,
            "evtype":"ke",
            "auth":"UCR",
            "mag":3.1,
            "magtype":"m",
            "unid":"20241004_0000179"
        }
    }
}
```

### Ответы на вопросы

1. Какие данные для этой области являются потоковыми?

Данные о землетрясениях, которые передаются сервисом.

2. Какие результаты мы хотим получить в результате обработки?

Планируется группировка сообщений во временное окно (например, 30 минут).

Далее идет сравнение координат (поле `"coordinates"`). 

Находится среднее координат по всем событиям в окне -> находится эпицентр (взвешенная сумма).

3. Как предметная область относится к запаздыванию обработки? Насколько это критично?

Критично, так как при потере данных о какой-либо координате возможна ошибочная оценка эпицентра землетрясений. 
Также система чувствительна к выбросам.

4. Как предметная область относится к потере данных? Насколько это критично? 

Необходимо обеспечить хранение с журналированием. 


В файле `test.py` находится пример взаимодействия с сервисом.
